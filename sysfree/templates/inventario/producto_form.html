{% extends "base.html" %}
{% load static %}

{% block title %}{{ title }} | SysFree{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h3">{{ title }}</h1>
    <a href="{% url 'inventario:producto_list' %}" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Volver
    </a>
</div>

<div class="card">
    <div class="card-body">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            {% if form.errors %}
            <div class="alert alert-danger">
                <strong>Error:</strong> Por favor corrige los errores indicados.
            </div>
            {% endif %}
            
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="{{ form.codigo.id_for_label }}" class="form-label">{{ form.codigo.label }}</label>
                    {{ form.codigo }}
                    {% if form.codigo.errors %}
                    <div class="invalid-feedback d-block">
                        {{ form.codigo.errors }}
                    </div>
                    {% endif %}
                </div>
                <div class="col-md-6">
                    <label for="{{ form.nombre.id_for_label }}" class="form-label">{{ form.nombre.label }}</label>
                    {{ form.nombre }}
                    {% if form.nombre.errors %}
                    <div class="invalid-feedback d-block">
                        {{ form.nombre.errors }}
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="mb-3">
                <label for="{{ form.descripcion.id_for_label }}" class="form-label">{{ form.descripcion.label }}</label>
                {{ form.descripcion }}
                {% if form.descripcion.errors %}
                <div class="invalid-feedback d-block">
                    {{ form.descripcion.errors }}
                </div>
                {% endif %}
            </div>
            
            <div class="row mb-3">
                <div class="col-md-4">
                    <label for="{{ form.precio_compra.id_for_label }}" class="form-label">{{ form.precio_compra.label }}</label>
                    {{ form.precio_compra }}
                    {% if form.precio_compra.errors %}
                    <div class="invalid-feedback d-block">
                        {{ form.precio_compra.errors }}
                    </div>
                    {% endif %}
                </div>
                <div class="col-md-4">
                    <label for="{{ form.precio_venta.id_for_label }}" class="form-label">{{ form.precio_venta.label }}</label>
                    {{ form.precio_venta }}
                    {% if form.precio_venta.errors %}
                    <div class="invalid-feedback d-block">
                        {{ form.precio_venta.errors }}
                    </div>
                    {% endif %}
                </div>
                <div class="col-md-4">
                    <label for="{{ form.iva.id_for_label }}" class="form-label">{{ form.iva.label }}</label>
                    {{ form.iva }}
                    {% if form.iva.errors %}
                    <div class="invalid-feedback d-block">
                        {{ form.iva.errors }}
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="row mb-3">
                <div class="col-md-4">
                    <label for="{{ form.stock.id_for_label }}" class="form-label">{{ form.stock.label }}</label>
                    {{ form.stock }}
                    {% if form.stock.errors %}
                    <div class="invalid-feedback d-block">
                        {{ form.stock.errors }}
                    </div>
                    {% endif %}
                </div>
                <div class="col-md-4">
                    <label for="{{ form.stock_minimo.id_for_label }}" class="form-label">{{ form.stock_minimo.label }}</label>
                    {{ form.stock_minimo }}
                    {% if form.stock_minimo.errors %}
                    <div class="invalid-feedback d-block">
                        {{ form.stock_minimo.errors }}
                    </div>
                    {% endif %}
                </div>
                <div class="col-md-4">
                    <label for="{{ form.categoria.id_for_label }}" class="form-label">{{ form.categoria.label }}</label>
                    {{ form.categoria }}
                    {% if form.categoria.errors %}
                    <div class="invalid-feedback d-block">
                        {{ form.categoria.errors }}
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="row mb-3">
                <div class="col-md-4">
                    <label for="{{ form.estado.id_for_label }}" class="form-label">{{ form.estado.label }}</label>
                    {{ form.estado }}
                    {% if form.estado.errors %}
                    <div class="invalid-feedback d-block">
                        {{ form.estado.errors }}
                    </div>
                    {% endif %}
                </div>
                <div class="col-md-4">
                    <label for="{{ form.tipo.id_for_label }}" class="form-label">{{ form.tipo.label }}</label>
                    {{ form.tipo }}
                    {% if form.tipo.errors %}
                    <div class="invalid-feedback d-block">
                        {{ form.tipo.errors }}
                    </div>
                    {% endif %}
                </div>
                <div class="col-md-4">
                    <label for="{{ form.imagen.id_for_label }}" class="form-label">{{ form.imagen.label }}</label>
                    {{ form.imagen }}
                    {% if form.imagen.errors %}
                    <div class="invalid-feedback d-block">
                        {{ form.imagen.errors }}
                    </div>
                    {% endif %}
                    {% if producto.imagen %}
                    <div class="mt-2">
                        <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}" class="img-thumbnail" style="max-height: 100px;">
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="row mb-3">
                <div class="col-md-6">
                    <div class="form-check">
                        {{ form.es_inventariable }}
                        <label class="form-check-label" for="{{ form.es_inventariable.id_for_label }}">
                            {{ form.es_inventariable.label }}
                        </label>
                        {% if form.es_inventariable.errors %}
                        <div class="invalid-feedback d-block">
                            {{ form.es_inventariable.errors }}
                        </div>
                        {% endif %}
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-check">
                        {{ form.activo }}
                        <label class="form-check-label" for="{{ form.activo.id_for_label }}">
                            {{ form.activo.label }}
                        </label>
                        {% if form.activo.errors %}
                        <div class="invalid-feedback d-block">
                            {{ form.activo.errors }}
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Guardar
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}